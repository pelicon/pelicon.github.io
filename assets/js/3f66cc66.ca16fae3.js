"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[497],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(n),m=o,g=u["".concat(s,".").concat(m)]||u[m]||p[m]||a;return n?r.createElement(g,l(l({ref:t},d),{},{components:n})):r.createElement(g,l({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,l=new Array(a);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var c=2;c<a;c++)l[c]=n[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},851:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:5,sidebar_label:"Access Unknown Storage"},l="Access unknown storage",i={unversionedId:"unknown_storage",id:"unknown_storage",title:"Access unknown storage",description:"Introduction",source:"@site/docs/unknown_storage.md",sourceDirName:".",slug:"/unknown_storage",permalink:"/docs/unknown_storage",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/unknown_storage.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,sidebar_label:"Access Unknown Storage"},sidebar:"tutorialSidebar",previous:{title:"Supported Storage Systems",permalink:"/docs/supported_storage"},next:{title:"Backup",permalink:"/docs/backup"}},s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Usage",id:"usage",level:2},{value:"StorageProvider capabilities annotation",id:"storageprovider-capabilities-annotation",level:2}],d={toc:c};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"access-unknown-storage"},"Access unknown storage"),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Pelicon can use StorageProvider CRD to access unsupported storage devices, but the storage connected in this way can only have some basic capabilities."),(0,o.kt)("p",null,"Prerequisites for access:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"The target storage conforms to the CSI specification"),(0,o.kt)("li",{parentName:"ol"},"The target storage is functioning normally")),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Modify the following yaml as needed, and apply")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: uds.dce.daocloud.io/v1\nkind: StorageProvider\nmetadata:\n  annotations:\n    uds.dce.daocloud.io/capabilities: \'{"snapshot":true,"clone":true,"expansion":true,"protocol":"block"}\' # Storage capabilities\n  name: ceph-rbd-1.0.0\nspec:\n  driver: rbd.csi.ceph.com # Provision name\n  vendor: ceph # Storage vendor name\n  product: rbd # Storage product\n  protocol: block # Storage protocal(block/file/local)\n  version: 1.0.0 # Version\n')),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Check the StorageProviders")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl get sp\nNAME                   VENDOR     PRODUCT    PROTOCOL   VERSION   DRIVERNAME                  CSIDRIVER      CSICONTROLLER   STORAGEDRIVER   AGE\nceph                   ceph       rbd        block      1.0.0     rbd.csi.ceph.com            NotInstalled   NotInstalled    NotInstalled    162d\ndaocloud-local-1.0.0   daocloud   DLocal     local      1.0.0     local.storage.daocloud.io   Ready          Ready           NotInstalled    332d\nlonghorn               longhorn   longhorn   block      1.0.0     driver.longhorn.io          NotInstalled   NotInstalled    NotInstalled    168d\nxsky-block-4.1.x       xsky       SDS        block      4.1.x     iscsi.csi.xsky.com          Ready          Ready           Ready           312d\nxsky-file-4.1.x        xsky       SDS        file       4.1.x     nfs.csi.xsky.com            Ready          Ready           NotInstalled    244d\n")),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"(Optional) Manage CSI Components")),(0,o.kt)("p",null,"If you want Pelicon to identify the CSI components of the storage system to monitor the running status of the CSI and display it in the Status of the StorageProvider CR, you need to tag the CSI Controller and CSI Driver (assuming all CSI components are deployments)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl label deployment <your-csi-controller> driver=<you provisioner name> role=csi-controller\nkubectl label deployment <your-csi-driver> driver=<you provisioner name> role=csi-driver\n")),(0,o.kt)("h2",{id:"storageprovider-capabilities-annotation"},"StorageProvider capabilities annotation"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"snapshot"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"clone"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"expansion"),(0,o.kt)("td",{parentName:"tr",align:null})),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"protocol"),(0,o.kt)("td",{parentName:"tr",align:null})))))}p.isMDXComponent=!0}}]);